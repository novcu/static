(function(){var v=$("#mp-music");if(v.length===0){return}var w=$("#mp-music-wrapper"),c=$("#mp-music-album"),h=$("#mp-hide-panel"),b=$("#mp-music-play"),u=$("#mp-music-next"),r=$("#mp-music-prev"),z=$("#mp-music-volume"),t=$("#mp-music-list"),a=$("#mp-list"),p=a.find("li"),o=v.data("autoplay"),g=v.data("autoplaynext"),j=true,d="250px";if(p.length){$(p[0]).addClass("current")}else{v.hide(300);return}var y=new Audio();y.addEventListener("ended",function(){n();if(g==="yes"){l()}},false);z.on("click",function(){f()});b.on("click",function(){if(!y.src){y.src=$(p[0]).data("src");$(p[0]).addClass("current")}y.paused?s():n()});u.on("click",function(){l()});r.on("click",function(){k()});p.on("click",function(){var A=$(this).data("src");if(A){y.src=A;s();p.removeClass("current");$(this).addClass("current")}});t.on("click",function(A){if(a.css("display")!=="none"){a.animate({width:"0px"},200,function(){a.hide()});j=true}else{a.show().animate({width:d},200);j=false}});c.on("click",function(A){if(w.hasClass("open")){m()}else{q()}$(document).one("click",function(){m()});w.on("click",function(B){B.stopPropagation()})});var f=function(){if(y.muted){y.muted=false;z.find("i").html("volume_up")}else{y.muted=true;z.find("i").html("volume_off")}};var s=function(){if(!y.src){return}y.play();if(y.paused){return}e(true);b.find("i").html("pause_circle_filled")};var n=function(){y.pause();e(false);b.find("i").html("play_circle_filled")};var l=function(){if(p.length==0){alert("No songs！");return}var B=a.find(".current");if(B.length){var A=B.next("li");if(A.length){i(A);return}}i($(p[0]))};var k=function(){if(p.length==0){alert("No songs ！");return}var B=a.find(".current");if(B.length){var A=B.prev("li");if(A.length){i(A);return}}i($(p[p.length-1]))};var i=function(A){p.removeClass("current");A.addClass("current");y.src=A.data("src");s()};var m=function(){if(a.css("display")!=="none"){a.animate({width:"0px"},200,function(){a.hide();x()})}else{x()}};var q=function(){w.addClass("mp-mdl-shadow--2dp open");h.slideDown(200,function(){if(!j){a.show().animate({width:d},200)}})};var x=function(){h.slideUp(200,function(){w.removeClass("mp-mdl-shadow--2dp open")})};var e=function(A){if(A){c.addClass("playing")}else{c.removeClass("playing")}};if(o==="yes"){setTimeout(function(){b.trigger("click")},5000)}})();